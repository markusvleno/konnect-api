{"version":3,"sources":["utils.js","redux/slice/user.js","redux/slice/UI.js","signal/helpers.js","signal/InMemorySignalProtocolStore.js","signal/SignalGateway.js","components/Logo.jsx","images/svgs.js","components/UserDetail.jsx","components/Option.jsx","components/Search.jsx","components/Users.jsx","components/Conversation.jsx","components/AddFriend.jsx","App.jsx","redux/slice/index.js","redux/index.js","index.jsx"],"names":["timeCalcl","ms","Date","currentTime","now","inputTime","getTime","toLocaleTimeString","slice","toLocaleDateString","getConversation","userId","prevConversation","localStorage","getItem","String","JSON","parse","user","createSlice","name","initialState","username","profilePicture","conversation","signalProtocalManager","socket","reducers","init","state","action","payload","savedConv","updateName","updateProfilePicture","newConversation","Array","conv","newMessage","convObj","msgObj","userObj","forEach","map","chatLog","axios","get","then","res","status","data","code","newUserObj","catch","error","console","log","removeItem","setItem","stringify","deleteConversation","newState","actions","UI","convWindow","isSelected","selectedUserId","settingWindow","isOpen","newConversationWindow","openConvWindow","changeSettingWindow","value","chatNewConversationWindow","util","StaticArrayBufferProto","ArrayBuffer","__proto__","toString","thing","dcodeIO","ByteBuffer","wrap","toArrayBuffer","undefined","Object","Error","isEqual","a","b","maxLength","Math","max","length","substring","min","arrayBufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","i","fromCharCode","window","btoa","base64ToArrayBuffer","base64","binary_string","atob","charCodeAt","getCookie","cookies","document","cookie","split","c","trim","libsignal","SignalProtocolStore","this","store","prototype","Direction","SENDING","RECEIVING","getIdentityKeyPair","Promise","resolve","getLocalRegistrationId","put","key","defaultValue","remove","isTrustedIdentity","identifier","identityKey","direction","trusted","loadIdentityKey","saveIdentity","address","SignalProtocolAddress","fromString","existing","getName","loadPreKey","keyId","pubKey","privKey","storePreKey","keyPair","removePreKey","loadSignedPreKey","storeSignedPreKey","removeSignedPreKey","loadSession","storeSession","record","removeSession","removeAllSessions","id","startsWith","storeSessionCipher","cipher","loadSessionCipher","SignalServerStore","bundleAPI","create","baseURL","headers","_token","preKeyBundle","storageBundle","preKeys","preKey","publicKey","signedPreKey","signature","postBundle","getBundle","splice","updatePreKeyBundle","registrationId","bundle","post","response","message","SignalProtocolManager","signalServerStore","_generateIdentityAsync","_generatePreKeyBundleAsync","registerNewPreKeyBundle","remoteUserId","sessionCipher","sessionBuilder","SessionBuilder","getPreKeyBundle","remoteUserPreKey","processPreKey","SessionCipher","encrypt","cipherText","type","decryptPreKeyWhisperMessage","body","decryptedMessage","decryptWhisperMessage","all","KeyHelper","generateIdentityKeyPair","generateRegistrationId","results","result","identity","generatePreKey","generateSignedPreKey","keys","publicPreKeys","createSignalProtocolManager","userid","dummySignalServer","signalProtocolManagerUser","initializeAsync","Logo","Fragment","className","width","height","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","React","Component","UserDetail","props","getUsername","bind","src","alt","PureComponent","connect","Option","onClick","e","preventDefault","fillRule","clipRule","style","display","margin","Search","cx","cy","r","x","y","transform","placeholder","onKeyPress","Users","getLastMsg","lmsg","makeConversationList","time","convList","createRef","Conversation","useSelector","convUserObj","temp","useState","setMessage","dispatch","useDispatch","scrollBar","useRef","useEffect","current","scrollTop","sendMessage","encryptMessageAsync","encryptedMessage","_msgToSend","receiver","sender","emit","origin","msgId","uuid","handleInput","target","trimStart","ref","msg","renderMessageList","onInput","AddFriend","renderValidate","control","errorMsg","usernameRef","classList","add","errorMessageRef","innerText","matchUsername","usernameRegex","test","fetchUser","available","validateUsername","setState","validUsername","event","clearTimeout","usernameTimeOut","setTimeout","handleChat","sendBtnTimeOut","spellCheck","autoCapitalize","App","SignalServer","io","path","autoConnect","reconnectionDelay","withCredentials","forceNew","reconnectionAttempts","query","userState","on","decryptMessageAsync","convObjRef","combineReducers","userReducer","middleware","thunk","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.e0e53ca0.chunk.js","sourcesContent":["const _24hr = 86400000;\n\nexport const timeCalcl = (ms) => {\n    if (!ms) return \" \";\n\n    if (ms < new Date(0)) return \" \";\n\n    const currentTime = new Date(Date.now());\n    const inputTime = new Date(ms);\n\n    // let inputInHr = inputTime.getHours() > 12 ? inputTime.getHours() - 12 : inputTime.getHours();\n    // let inputInM = inputTime.getMinutes();\n    // let inputInS = inputTime.getSeconds();\n\n    let gapTime = inputTime.getTime() - currentTime.getTime();\n\n    if (gapTime < _24hr) return inputTime.toLocaleTimeString().slice(0, -3);\n    else return inputTime.toLocaleDateString();\n};\n\nexport const getConversation = (userId) => {\n    const prevConversation = localStorage.getItem(String(userId));\n    return prevConversation ? JSON.parse(prevConversation)[0] : [];\n};\n\nexport const putConversation = (userId, convObj) => {\n    if (!userId || !convObj) return;\n\n    localStorage.removeItem(String(userId));\n    localStorage.setItem(String(userId), JSON.stringify([convObj]));\n};\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { putConversation } from \"../../utils\";\nimport axios from \"axios\";\n\n// let sample = [\n//     {\n//         username: \"brah1\",\n//         name: \"Brah\",\n//         chatLog: [\n//             {\n//                 data: \"sup homie\",\n//                 msgID: 1000,\n//                 origin: true,\n//                 time: Date.now(),\n//             },\n//         ],\n//     },\n// ];\n\nexport const user = createSlice({\n    name: \"user\",\n    initialState: {\n        userId: null,\n        username: \"\",\n        name: \"\",\n        profilePicture: \"/static/assets/images/profile.svg\",\n        conversation: [],\n        signalProtocalManager: null,\n        socket: null,\n    },\n    reducers: {\n        init: (state, action) => {\n            const payload = action.payload;\n            state.userId = payload.userId;\n            state.username = payload.username;\n            state.name = payload.name;\n            state.conversation = payload.savedConv;\n            state.signalProtocalManager = payload.signalProtocalManager;\n            state.socket = payload.socket;\n        },\n\n        updateName: (state, action) => {\n            state.name = action.payload.name;\n        },\n        updateProfilePicture: (state, action) => {\n            state.profilePicture = action.payload.profilePicture;\n        },\n        newConversation: (state, action) => {\n            state.conversation = new Array(...state.conversation, action.payload.conv);\n        },\n        newMessage: (state, action) => {\n            const { username, msgObj } = action.payload;\n\n            var userObj = null;\n            state.conversation.forEach((conv) => {\n                if (conv.username === username) {\n                    userObj = conv;\n                    return;\n                }\n            });\n\n            if (!userObj) {\n                axios\n                    .get(`/api/v1/user/?username=${username}`)\n                    .then((res) => {\n                        if (res.status !== 200 || res.data.code !== 200) {\n                            return;\n                        }\n\n                        let newUserObj = {\n                            username: res.data.data.username,\n                            userId: res.data.data.userId,\n                            name: res.data.data.name,\n                            chatLog: [msgObj],\n                        };\n                        state.conversation = [newUserObj, ...state.conversation];\n                    })\n                    .catch((error) => {\n                        console.log(error);\n                    });\n            } else {\n                state.conversation = state.conversation.map((conv) => {\n                    if (conv.username === username) {\n                        conv.chatLog = [...conv.chatLog, msgObj];\n                        return conv;\n                    } else return conv;\n                });\n            }\n            putConversation(state.userId, state.conversation);\n        },\n        deleteConversation: (state, action) => {\n            const { username } = action.payload;\n            const newState = state.conversation.forEach((conv) => {\n                if (conv.username !== username);\n                return conv;\n            });\n\n            state.conversation = new Array(newState);\n        },\n    },\n});\n\nexport const { init, updateName, updateProfilePicture, newConversation, deleteConversation, newMessage } = user.actions;\n\nexport default user.reducer;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const UI = createSlice({\n    name: \"UI\",\n    initialState: {\n        convWindow: {\n            isSelected: false,\n            selectedUserId: null,\n        },\n        settingWindow: {\n            isOpen: false,\n        },\n        newConversationWindow: {\n            isOpen: false,\n        },\n    },\n    reducers: {\n        openConvWindow: (state, action) => {\n            const { userId, isSelected } = action.payload;\n\n            if (!userId) {\n                state.convWindow.isSelected = false;\n                return;\n            }\n            state.convWindow = { isSelected: isSelected, selectedUserId: userId };\n        },\n        changeSettingWindow: (state, action) => {\n            const value = action.payload;\n            if (typeof value !== \"boolean\") {\n                state.settingWindow.isOpen = false;\n            } else {\n                state.settingWindow.isOpen = value;\n            }\n        },\n        chatNewConversationWindow: (state, action) => {\n            const { value } = action.payload;\n            if (typeof value !== \"boolean\") {\n                state.newConversationWindow.isOpen = false;\n            } else {\n                state.newConversationWindow.isOpen = value;\n            }\n        },\n    },\n});\n\nexport const { changeSettingWindow, openConvWindow, chatNewConversationWindow } = UI.actions;\n\nexport default UI.reducer;\n","/*\n * vim: ts=4:sw=4\n */\n/* global dcodeIO */\n\nconst util = (function () {\n    \"use strict\";\n\n    var StaticArrayBufferProto = new ArrayBuffer().__proto__;\n\n    return {\n        toString: function (thing) {\n            if (typeof thing == \"string\") {\n                return thing;\n            }\n            return new dcodeIO.ByteBuffer.wrap(thing).toString(\"binary\");\n        },\n        toArrayBuffer: function (thing) {\n            if (thing === undefined) {\n                return undefined;\n            }\n            if (thing === Object(thing)) {\n                if (thing.__proto__ == StaticArrayBufferProto) {\n                    return thing;\n                }\n            }\n\n            var str;\n            if (typeof thing == \"string\") {\n                str = thing;\n            } else {\n                throw new Error(\"Tried to convert a non-string of type \" + typeof thing + \" to an array buffer\");\n            }\n            return new dcodeIO.ByteBuffer.wrap(thing, \"binary\").toArrayBuffer();\n        },\n        isEqual: function (a, b) {\n            // TODO: Special-case arraybuffers, etc\n            if (a === undefined || b === undefined) {\n                return false;\n            }\n            a = util.toString(a);\n            b = util.toString(b);\n            var maxLength = Math.max(a.length, b.length);\n            if (maxLength < 5) {\n                throw new Error(\"a/b compare too short\");\n            }\n            return a.substring(0, Math.min(maxLength, a.length)) == b.substring(0, Math.min(maxLength, b.length));\n        },\n        arrayBufferToBase64: (buffer) => {\n            let binary = \"\";\n            let bytes = new Uint8Array(buffer);\n            let len = bytes.byteLength;\n            for (let i = 0; i < len; i++) {\n                binary += String.fromCharCode(bytes[i]);\n            }\n            return window.btoa(binary);\n        },\n        base64ToArrayBuffer: (base64) => {\n            let binary_string = window.atob(base64);\n            let len = binary_string.length;\n            let bytes = new Uint8Array(len);\n            for (let i = 0; i < len; i++) {\n                bytes[i] = binary_string.charCodeAt(i);\n            }\n            return bytes.buffer;\n        },\n        getCookie: (name) => {\n            const cookies = document.cookie.split(\";\");\n            for (let i = 0; i < cookies.length; i++) {\n                let c = cookies[i].trim().split(\"=\");\n                if (c[0] === name) {\n                    return c[1];\n                }\n            }\n            return undefined;\n        },\n    };\n})();\n\nexport default util;\n","import util from \"./helpers\";\n\nconst libsignal = window.libsignal;\n\nfunction SignalProtocolStore() {\n    this.store = {};\n}\n\nSignalProtocolStore.prototype = {\n    Direction: {\n        SENDING: 1,\n        RECEIVING: 2,\n    },\n\n    getIdentityKeyPair: function () {\n        return Promise.resolve(this.get(\"identityKey\"));\n    },\n    getLocalRegistrationId: function () {\n        return Promise.resolve(this.get(\"registrationId\"));\n    },\n    put: function (key, value) {\n        if (key === undefined || value === undefined || key === null || value === null)\n            throw new Error(\"Tried to store undefined/null\");\n        this.store[key] = value;\n    },\n    get: function (key, defaultValue) {\n        if (key === null || key === undefined) throw new Error(\"Tried to get value for undefined/null key\");\n        if (key in this.store) {\n            return this.store[key];\n        } else {\n            return defaultValue;\n        }\n    },\n    remove: function (key) {\n        if (key === null || key === undefined) throw new Error(\"Tried to remove value for undefined/null key\");\n        delete this.store[key];\n    },\n\n    isTrustedIdentity: function (identifier, identityKey, direction) {\n        if (identifier === null || identifier === undefined) {\n            throw new Error(\"tried to check identity key for undefined/null key\");\n        }\n        if (!(identityKey instanceof ArrayBuffer)) {\n            throw new Error(\"Expected identityKey to be an ArrayBuffer\");\n        }\n        var trusted = this.get(\"identityKey\" + identifier);\n        if (trusted === undefined) {\n            return Promise.resolve(true);\n        }\n        return Promise.resolve(util.toString(identityKey) === util.toString(trusted));\n    },\n    loadIdentityKey: function (identifier) {\n        if (identifier === null || identifier === undefined)\n            throw new Error(\"Tried to get identity key for undefined/null key\");\n        return Promise.resolve(this.get(\"identityKey\" + identifier));\n    },\n    saveIdentity: function (identifier, identityKey) {\n        if (identifier === null || identifier === undefined)\n            throw new Error(\"Tried to put identity key for undefined/null key\");\n\n        var address = new libsignal.SignalProtocolAddress.fromString(identifier);\n\n        var existing = this.get(\"identityKey\" + address.getName());\n        this.put(\"identityKey\" + address.getName(), identityKey);\n\n        if (existing && util.toString(identityKey) !== util.toString(existing)) {\n            return Promise.resolve(true);\n        } else {\n            return Promise.resolve(false);\n        }\n    },\n\n    /* Returns a prekeypair object or undefined */\n    loadPreKey: function (keyId) {\n        var res = this.get(\"25519KeypreKey\" + keyId);\n        if (res !== undefined) {\n            res = { pubKey: res.pubKey, privKey: res.privKey };\n        }\n        return Promise.resolve(res);\n    },\n    storePreKey: function (keyId, keyPair) {\n        return Promise.resolve(this.put(\"25519KeypreKey\" + keyId, keyPair));\n    },\n    removePreKey: function (keyId) {\n        return Promise.resolve(this.remove(\"25519KeypreKey\" + keyId));\n    },\n\n    /* Returns a signed keypair object or undefined */\n    loadSignedPreKey: function (keyId) {\n        var res = this.get(\"25519KeysignedKey\" + keyId);\n        if (res !== undefined) {\n            res = { pubKey: res.pubKey, privKey: res.privKey };\n        }\n        return Promise.resolve(res);\n    },\n    storeSignedPreKey: function (keyId, keyPair) {\n        return Promise.resolve(this.put(\"25519KeysignedKey\" + keyId, keyPair));\n    },\n    removeSignedPreKey: function (keyId) {\n        return Promise.resolve(this.remove(\"25519KeysignedKey\" + keyId));\n    },\n\n    loadSession: function (identifier) {\n        return Promise.resolve(this.get(\"session\" + identifier));\n    },\n    storeSession: function (identifier, record) {\n        return Promise.resolve(this.put(\"session\" + identifier, record));\n    },\n    removeSession: function (identifier) {\n        return Promise.resolve(this.remove(\"session\" + identifier));\n    },\n    removeAllSessions: function (identifier) {\n        for (var id in this.store) {\n            if (id.startsWith(\"session\" + identifier)) {\n                delete this.store[id];\n            }\n        }\n        return Promise.resolve();\n    },\n\n    /* Stores and loads a session cipher */\n    storeSessionCipher(identifier, cipher) {\n        this.put(\"cipher\" + identifier, cipher);\n    },\n    loadSessionCipher(identifier) {\n        var cipher = this.get(\"cipher\" + identifier);\n\n        if (cipher == undefined) {\n            return null;\n        } else {\n            return cipher;\n        }\n    },\n};\n\nexport default SignalProtocolStore;\n","import util from \"./helpers\";\nimport SignalProtocolStore from \"./InMemorySignalProtocolStore\";\nimport axios from \"axios\";\n\nconst libsignal = window.libsignal;\n/**\n * Dummy signal server connector.\n * In a real application this component would connect to your signal\n * server for storing and fetching user public keys over HTTP.\n */\nexport class SignalServerStore {\n    constructor() {\n        this.bundleAPI = axios.create({\n            baseURL: \"/api/v1/bundle\",\n            headers: {\n                cookies: {\n                    _token: util.getCookie(\"_token\"),\n                },\n            },\n        });\n    }\n\n    /**\n     * When a user logs on they should generate their keys and then register them with the server.\n     *\n     * @param userId The user ID.\n     * @param preKeyBundle The user's generated pre-key bundle.\n     */\n    async registerNewPreKeyBundle(userId, preKeyBundle) {\n        let storageBundle = { ...preKeyBundle };\n        storageBundle.identityKey = util.arrayBufferToBase64(storageBundle.identityKey);\n        storageBundle.preKeys = storageBundle.preKeys.map((preKey) => {\n            return {\n                ...preKey,\n                publicKey: util.arrayBufferToBase64(preKey.publicKey),\n            };\n        });\n        storageBundle.signedPreKey.publicKey = util.arrayBufferToBase64(storageBundle.signedPreKey.publicKey);\n        storageBundle.signedPreKey.signature = util.arrayBufferToBase64(storageBundle.signedPreKey.signature);\n        // localStorage.setItem(userId, JSON.stringify(storageBundle));\n        await this.postBundle(userId, JSON.stringify(storageBundle));\n    }\n\n    async updatePreKeyBundle(userId, preKeyBundle) {\n        // localStorage.setItem(userId, JSON.stringify(preKeyBundle));\n        await this.postBundle(userId, JSON.stringify(preKeyBundle));\n    }\n    /**\n     * Gets the pre-key bundle for the given user ID.\n     * If you want to start a conversation with a user, you need to fetch their pre-key bundle first.\n     *\n     * @param userId The ID of the user.\n     */\n    async getPreKeyBundle(userId) {\n        // let preKeyBundle = JSON.parse(localStorage.getItem(userId));\n\n        let preKeyBundle = JSON.parse(await this.getBundle(userId));\n\n        let preKey = preKeyBundle.preKeys.splice(-1);\n        preKey[0].publicKey = util.base64ToArrayBuffer(preKey[0].publicKey);\n        this.updatePreKeyBundle(userId, preKeyBundle);\n        return {\n            identityKey: util.base64ToArrayBuffer(preKeyBundle.identityKey),\n            registrationId: preKeyBundle.registrationId,\n            signedPreKey: {\n                keyId: preKeyBundle.signedPreKey.keyId,\n                publicKey: util.base64ToArrayBuffer(preKeyBundle.signedPreKey.publicKey),\n                signature: util.base64ToArrayBuffer(preKeyBundle.signedPreKey.signature),\n            },\n            preKey: preKey[0],\n        };\n    }\n\n    async postBundle(userId, bundle) {\n        await this.bundleAPI\n            .post(`/?id=${userId}`, {\n                bundle: bundle,\n            })\n            .then((response) => {\n                if (response.data.code !== 200) console.log(response.data.message);\n            })\n            .catch((error) => {\n                console.log(error);\n            });\n    }\n\n    async getBundle(userId) {\n        let bundle = await this.bundleAPI\n            .get(`/?id=${userId}`)\n            .then((response) => {\n                if (response.status !== 200 || response.data.code !== 200) {\n                    //unknown server error handler\n                    return {};\n                }\n\n                return response.data.bundle;\n            })\n            .catch((error) => {\n                console.log(error);\n                return {};\n            });\n\n        return bundle;\n    }\n}\n\n/**\n * A signal protocol manager.\n */\nclass SignalProtocolManager {\n    constructor(userId, signalServerStore) {\n        this.userId = userId;\n        this.store = new SignalProtocolStore();\n        this.signalServerStore = signalServerStore;\n    }\n\n    /**\n     * Initialize the manager when the user logs on.\n     */\n    async initializeAsync() {\n        await this._generateIdentityAsync();\n\n        var preKeyBundle = await this._generatePreKeyBundleAsync();\n\n        this.signalServerStore.registerNewPreKeyBundle(this.userId, preKeyBundle);\n    }\n\n    /**\n     * Encrypt a message for a given user.\n     *\n     * @param remoteUserId The recipient user ID.\n     * @param message The message to send.\n     */\n    async encryptMessageAsync(remoteUserId, message) {\n        var sessionCipher = this.store.loadSessionCipher(remoteUserId);\n\n        if (sessionCipher === null) {\n            var address = new libsignal.SignalProtocolAddress(remoteUserId, 123);\n            // Instantiate a SessionBuilder for a remote recipientId + deviceId tuple.\n            var sessionBuilder = new libsignal.SessionBuilder(this.store, address);\n\n            var remoteUserPreKey = await this.signalServerStore.getPreKeyBundle(remoteUserId);\n            // Process a prekey fetched from the server. Returns a promise that resolves\n            // once a session is created and saved in the store, or rejects if the\n            // identityKey differs from a previously seen identity for this address.\n            await sessionBuilder.processPreKey(remoteUserPreKey);\n\n            var sessionCipher = new libsignal.SessionCipher(this.store, address);\n            this.store.storeSessionCipher(remoteUserId, sessionCipher);\n        }\n\n        let cipherText = await sessionCipher.encrypt(util.toArrayBuffer(message));\n        return cipherText;\n    }\n\n    /**\n     * Decrypts a message from a given user.\n     *\n     * @param remoteUserId The user ID of the message sender.\n     * @param cipherText The encrypted message bundle. (This includes the encrypted message itself and accompanying metadata)\n     * @returns The decrypted message string.\n     */\n    async decryptMessageAsync(remoteUserId, cipherText) {\n        var sessionCipher = this.store.loadSessionCipher(remoteUserId);\n\n        if (sessionCipher == null) {\n            var address = new libsignal.SignalProtocolAddress(remoteUserId, 123);\n            var sessionCipher = new libsignal.SessionCipher(this.store, address);\n            this.store.storeSessionCipher(remoteUserId, sessionCipher);\n        }\n\n        var messageHasEmbeddedPreKeyBundle = cipherText.type == 3;\n        // Decrypt a PreKeyWhisperMessage by first establishing a new session.\n        // Returns a promise that resolves when the message is decrypted or\n        // rejects if the identityKey differs from a previously seen identity for this address.\n        if (messageHasEmbeddedPreKeyBundle) {\n            var decryptedMessage = await sessionCipher.decryptPreKeyWhisperMessage(cipherText.body, \"binary\");\n            return util.toString(decryptedMessage);\n        } else {\n            // Decrypt a normal message using an existing session\n            var decryptedMessage = await sessionCipher.decryptWhisperMessage(cipherText.body, \"binary\");\n            return util.toString(decryptedMessage);\n        }\n    }\n\n    /**\n     * Generates a new identity for the local user.\n     */\n    async _generateIdentityAsync() {\n        var results = await Promise.all([\n            libsignal.KeyHelper.generateIdentityKeyPair(),\n            libsignal.KeyHelper.generateRegistrationId(),\n        ]);\n\n        this.store.put(\"identityKey\", results[0]);\n        this.store.put(\"registrationId\", results[1]);\n    }\n\n    /**\n     * Generates a new pre-key bundle for the local user.\n     *\n     * @returns A pre-key bundle.\n     */\n    async _generatePreKeyBundleAsync() {\n        var result = await Promise.all([this.store.getIdentityKeyPair(), this.store.getLocalRegistrationId()]);\n\n        let identity = result[0];\n        let registrationId = result[1];\n\n        // PLEASE NOTE: I am creating set of 4 pre-keys for demo purpose only.\n        // The libsignal-javascript does not provide a counter to generate multiple keys, contrary to the case of JAVA (KeyHelper.java)\n        // Therefore you need to set it manually (as per my research)\n        var keys = await Promise.all([\n            libsignal.KeyHelper.generatePreKey(registrationId + 1),\n            libsignal.KeyHelper.generatePreKey(registrationId + 2),\n            libsignal.KeyHelper.generatePreKey(registrationId + 3),\n            libsignal.KeyHelper.generatePreKey(registrationId + 4),\n            libsignal.KeyHelper.generateSignedPreKey(identity, registrationId + 1),\n        ]);\n\n        let preKeys = [keys[0], keys[1], keys[2], keys[3]];\n        let signedPreKey = keys[4];\n\n        preKeys.forEach((preKey) => {\n            this.store.storePreKey(preKey.keyId, preKey.keyPair);\n        });\n        this.store.storeSignedPreKey(signedPreKey.keyId, signedPreKey.keyPair);\n\n        let publicPreKeys = preKeys.map((preKey) => {\n            return {\n                keyId: preKey.keyId,\n                publicKey: preKey.keyPair.pubKey,\n            };\n        });\n        return {\n            identityKey: identity.pubKey,\n            registrationId: registrationId,\n            preKeys: publicPreKeys,\n            signedPreKey: {\n                keyId: signedPreKey.keyId,\n                publicKey: signedPreKey.keyPair.pubKey,\n                signature: signedPreKey.signature,\n            },\n        };\n    }\n}\n\nexport async function createSignalProtocolManager(userid, dummySignalServer) {\n    let signalProtocolManagerUser = new SignalProtocolManager(userid, dummySignalServer);\n    await Promise.all([signalProtocolManagerUser.initializeAsync()]);\n    return signalProtocolManagerUser;\n}\n","import React from \"react\";\nimport \"../css/logo.css\";\nimport { logo } from \"../images/svgs\";\n\nclass Logo extends React.Component {\n    render() {\n        return (\n            <React.Fragment>\n                <span className=\"logo\">\n                    K{logo()}\n                    NNECT\n                </span>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default Logo;\n","export const settings = () => {\n    return (\n        <svg width=\"121\" height=\"120\" viewBox=\"0 0 121 120\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M33.3752 89.4131C34.8075 89.4121 36.2345 89.5861 37.6245 89.9311C41.768 90.9421 45.3573 93.5217 47.6367 97.1265C49.0518 99.3397 49.8174 101.906 49.8463 104.532C49.8756 105.454 50.0863 106.36 50.4664 107.2C50.8465 108.04 51.3885 108.796 52.0614 109.426C52.7342 110.056 53.5248 110.548 54.3877 110.872C55.2507 111.196 56.1691 111.346 57.0903 111.315H64.8847C68.8588 111.315 72.1126 108.32 72.1288 104.621C72.1308 102.566 72.564 100.533 73.4005 98.6551C74.2371 96.7772 75.4582 95.0956 76.9851 93.719C80.181 90.7629 84.3926 89.1513 88.7455 89.2188C91.5283 89.2746 94.2602 89.9756 96.7261 91.2666C98.3817 92.1632 100.312 92.4113 102.14 91.9624C103.969 91.5135 105.565 90.3998 106.617 88.8384L110.753 82.428C111.21 81.6825 111.509 80.8503 111.628 79.9838C111.748 79.1173 111.687 78.2353 111.449 77.3936C111.188 76.5299 110.757 75.727 110.182 75.0321C109.606 74.3371 108.898 73.7641 108.098 73.3467C106.236 72.3863 104.588 71.0574 103.255 69.4406C101.922 67.8238 100.932 65.9529 100.344 63.9416C99.7934 61.9821 99.6594 59.929 99.9508 57.9145C100.242 55.9001 100.952 53.9691 102.036 52.2459C103.52 49.8777 105.603 47.9429 108.074 46.6368C108.869 46.2327 109.572 45.6687 110.139 44.9801C110.706 44.2915 111.124 43.4932 111.368 42.6352C111.612 41.7773 111.676 40.8782 111.557 39.9943C111.437 39.1104 111.135 38.2609 110.672 37.4988C110.586 37.3712 110.513 37.2357 110.453 37.0942L106.803 31.2099C105.764 29.6406 104.176 28.5165 102.35 28.0582C100.525 27.6 98.5937 27.8407 96.9365 28.7332C93.1244 30.8124 88.6722 31.3899 84.4558 30.3519C80.288 29.3922 76.6636 26.8345 74.3627 23.2293C72.9313 21.0073 72.1569 18.426 72.1288 15.7829C72.1662 14.8415 72.0029 13.9029 71.6499 13.0293C71.2968 12.1558 70.762 11.3673 70.081 10.7162C68.6718 9.40049 66.8127 8.67365 64.8847 8.6846H57.0903C55.2034 8.67343 53.3819 9.37599 51.9912 10.6514C51.3345 11.251 50.8102 11.9812 50.452 12.7952C50.0938 13.6091 49.9096 14.489 49.9111 15.3782C49.7816 23.8687 42.3433 30.6838 33.3752 30.6838C30.5448 30.6698 27.7627 29.9493 25.2814 28.5875C23.624 27.7179 21.7028 27.4948 19.8902 27.9614C18.0777 28.428 16.503 29.551 15.4716 31.1128L11.2627 37.5879C10.8157 38.3522 10.5303 39.2001 10.4239 40.0791C10.3176 40.9581 10.3927 41.8496 10.6445 42.6985C10.8964 43.5473 11.3197 44.3355 11.8882 45.0143C12.4567 45.6931 13.1584 46.2481 13.9499 46.6449C16.4369 47.8791 18.5298 49.7832 19.993 52.1427C21.4562 54.5023 22.2314 57.2235 22.2314 59.9999C22.2314 62.7762 21.4562 65.4974 19.993 67.857C18.5298 70.2165 16.4369 72.1206 13.9499 73.3548C13.1556 73.7576 12.453 74.3199 11.8859 75.0066C11.3188 75.6933 10.8995 76.4896 10.6541 77.3457C10.4087 78.2019 10.3426 79.0994 10.4599 79.9822C10.5771 80.865 10.8753 81.7142 11.3356 82.4766L15.2611 88.7736C16.2322 90.3917 17.7933 91.5698 19.6156 92.0597C21.4669 92.5429 23.4311 92.3298 25.1357 91.4608C27.6703 90.1065 30.5015 89.4029 33.3752 89.4131V89.4131ZM64.8928 120H57.0903C47.9523 120 40.5141 113.08 40.5141 104.573C40.4881 103.481 40.1634 102.417 39.5752 101.497C38.5864 99.9063 37.015 98.7648 35.1964 98.3163C33.3638 97.8707 31.4315 98.1126 29.7654 98.9962C25.8481 101.016 21.3238 101.52 17.058 100.413C12.9142 99.3515 9.34467 96.7223 7.10248 93.0796L3.20932 86.8392C-1.33945 79.4818 1.372 70.0687 9.24736 65.8355C10.3465 65.3071 11.274 64.479 11.9232 63.4466C12.5724 62.4142 12.9168 61.2194 12.9168 59.9999C12.9168 58.7803 12.5724 57.5855 11.9232 56.5531C11.274 55.5207 10.3465 54.6926 9.24736 54.1642C1.36391 49.8987 -1.33945 40.4693 3.20122 33.1281L7.42623 26.653C11.9102 19.4252 22.0438 16.8594 29.9596 21.0844C31.0041 21.6684 32.1787 21.9802 33.3752 21.991C37.2522 21.991 40.4979 19.0205 40.5626 15.354C40.5701 13.3135 41.0022 11.297 41.8313 9.43254C42.6604 7.56811 43.8684 5.89662 45.3785 4.52434C48.565 1.58168 52.7531 -0.0362378 57.0903 -0.000141172H64.8847C69.2974 -0.0181372 73.5503 1.64946 76.7747 4.66194C78.2953 6.09747 79.4976 7.83639 80.3034 9.76608C81.1093 11.6958 81.501 13.7732 81.4529 15.8639C81.5012 16.914 81.825 17.9328 82.3918 18.8182C83.4005 20.3879 84.979 21.505 86.7949 21.9343C88.634 22.3706 90.5693 22.1172 92.234 21.222C100.198 16.9889 110.34 19.5223 114.897 26.8878L118.774 33.1362C118.871 33.2948 118.958 33.4597 119.033 33.63C123.153 40.9145 120.401 49.9958 112.744 54.1561C111.667 54.7179 110.759 55.5559 110.113 56.5842C109.637 57.3353 109.324 58.178 109.194 59.0578C109.065 59.9377 109.121 60.835 109.361 61.6915C109.62 62.5573 110.051 63.362 110.628 64.0573C111.205 64.7527 111.916 65.3245 112.72 65.7384C114.565 66.7067 116.199 68.0338 117.525 69.6419C118.851 71.25 119.842 73.1067 120.441 75.1031C120.994 77.0632 121.13 79.1175 120.84 81.1334C120.55 83.1493 119.841 85.082 118.758 86.8068L114.63 93.2091C110.081 100.494 99.9394 103.003 92.0559 98.7615C90.9827 98.1998 89.7947 97.8924 88.5837 97.8631V97.8631C86.7341 97.876 84.9549 98.5738 83.5897 99.8218C82.929 100.424 82.4013 101.158 82.0403 101.976C81.6793 102.794 81.4931 103.679 81.4934 104.573C81.4206 113.12 73.9823 120 64.8847 120H64.8928Z\"\n                fill=\"white\"\n            />\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M61.0162 49.0733C54.5411 49.0733 49.28 53.9782 49.28 60C49.28 66.0219 54.5411 70.9187 61.0162 70.9187C67.4913 70.9187 72.7523 66.0219 72.7523 60C72.7523 53.9782 67.4832 49.0733 61.0162 49.0733ZM61.0162 79.6034C49.4015 79.6034 39.9721 70.8134 39.9721 60C39.9721 49.1866 49.4015 40.3885 61.0162 40.3885C72.6309 40.3885 82.0603 49.1866 82.0603 60C82.0603 70.8134 72.6309 79.6034 61.0162 79.6034Z\"\n                fill=\"white\"\n            />\n        </svg>\n    );\n};\n\nexport const send = () => {\n    return (\n        <svg width=\"121\" height=\"121\" viewBox=\"0 0 121 121\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M54.1897 72.7493L76.6965 109.26C77.0071 109.797 77.4733 110.227 78.0334 110.494C78.5936 110.76 79.2214 110.85 79.8338 110.752C80.4556 110.682 81.0422 110.428 81.5174 110.021C81.9925 109.614 82.3343 109.073 82.4982 108.469L110.689 13.4223C110.859 12.8592 110.873 12.2603 110.729 11.6899C110.585 11.1195 110.288 10.5992 109.87 10.1849C109.466 9.77744 108.96 9.48701 108.404 9.34449C107.849 9.20198 107.265 9.21273 106.715 9.37558L11.5495 37.2113C10.948 37.3797 10.4101 37.7227 10.0038 38.197C9.59746 38.6714 9.34103 39.2556 9.26696 39.8757C9.17021 40.4973 9.25929 41.1336 9.52301 41.7048C9.78673 42.2759 10.2133 42.7563 10.7492 43.0858L47.6786 66.1746L80.3158 33.201C81.1866 32.3779 82.3431 31.9255 83.5412 31.939C84.7393 31.9526 85.8853 32.4311 86.7372 33.2736C87.5892 34.1161 88.0805 35.2567 88.1073 36.4546C88.1342 37.6525 87.6947 38.814 86.8814 39.6939L54.1897 72.7493ZM79.3609 120.036C77.2446 120.039 75.1633 119.496 73.3185 118.459C71.4736 117.422 69.9278 115.926 68.8305 114.116L44.9778 75.3683L5.85684 50.9245C3.82046 49.6472 2.19609 47.8093 1.17881 45.6313C0.161517 43.4534 -0.20544 41.0281 0.122003 38.6467C0.449447 36.2653 1.45737 34.029 3.02473 32.2064C4.59208 30.3839 6.65224 29.0525 8.95778 28.3722L104.078 0.500164C106.227 -0.128453 108.507 -0.165082 110.675 0.394143C112.844 0.953368 114.822 2.0877 116.399 3.67743C117.977 5.26715 119.096 7.25329 119.639 9.42622C120.181 11.5992 120.127 13.8783 119.482 16.0231L91.3373 111.07C90.6751 113.384 89.3487 115.454 87.5222 117.021C85.6956 118.589 83.4493 119.587 81.0614 119.891C80.4983 119.975 79.9303 120.024 79.3609 120.036V120.036Z\"\n                fill=\"white\"\n            />\n        </svg>\n    );\n};\n\nexport const search = () => {\n    return (\n        <svg width=\"121\" height=\"121\" viewBox=\"0 0 121 121\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <circle cx=\"50\" cy=\"50\" r=\"45\" stroke=\"#FFF8F8\" strokeWidth=\"10\" />\n            <rect\n                x=\"112.549\"\n                y=\"120.785\"\n                width=\"47.5392\"\n                height=\"10.9338\"\n                transform=\"rotate(-135 112.549 120.785)\"\n                fill=\"white\"\n            />\n        </svg>\n    );\n};\n\nexport const moreOption = () => {\n    return (\n        <svg width=\"121\" height=\"121\" viewBox=\"0 0 121 121\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M67.4837 86.1992C67.4915 87.7907 66.8667 89.32 65.747 90.4508C64.6272 91.5816 63.1041 92.2213 61.5126 92.2291C59.9212 92.2369 58.3919 91.6122 57.2611 90.4924C56.1303 89.3726 55.4906 87.8495 55.4828 86.2581V86.1992C55.4828 84.6078 56.115 83.0816 57.2403 81.9563C58.3656 80.831 59.8918 80.1988 61.4832 80.1988C63.0746 80.1988 64.6009 80.831 65.7262 81.9563C66.8515 83.0816 67.4837 84.6078 67.4837 86.1992V86.1992Z\"\n                fill=\"white\"\n            />\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M67.4837 61.5084C67.4837 63.0999 66.8515 64.6261 65.7262 65.7514C64.6009 66.8767 63.0746 67.5089 61.4832 67.5089C59.8918 67.5089 58.3656 66.8767 57.2403 65.7514C56.115 64.6261 55.4828 63.0999 55.4828 61.5084C55.4828 59.917 56.115 58.3908 57.2403 57.2655C58.3656 56.1402 59.8918 55.508 61.4832 55.508C63.0746 55.508 64.6009 56.1402 65.7262 57.2655C66.8515 58.3908 67.4837 59.917 67.4837 61.5084Z\"\n                fill=\"white\"\n            />\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M67.4837 38.1371C67.4903 39.7285 66.8646 41.2574 65.744 42.3874C64.6234 43.5174 63.0999 44.156 61.5084 44.1627C59.917 44.1694 58.3882 43.5436 57.2581 42.423C56.1281 41.3025 55.4895 39.7789 55.4828 38.1875V38.1371C55.4828 36.5457 56.115 35.0194 57.2403 33.8941C58.3656 32.7688 59.8918 32.1366 61.4832 32.1366C63.0746 32.1366 64.6009 32.7688 65.7262 33.8941C66.8515 35.0194 67.4837 36.5457 67.4837 38.1371V38.1371Z\"\n                fill=\"white\"\n            />\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M61.0042 10.0006C50.9163 9.99896 41.0545 12.9889 32.6659 18.5922C24.2773 24.1955 17.7387 32.1606 13.8771 41.4802C10.0154 50.7997 9.00419 61.0551 10.9712 70.9494C12.9383 80.8436 17.7952 89.9324 24.9279 97.0662C32.0605 104.2 41.1485 109.058 51.0424 111.027C60.9364 112.996 71.1919 111.986 80.5121 108.126C89.8323 104.266 97.7984 97.7288 103.403 89.3411C109.008 80.9535 111.999 71.0921 111.999 61.0042C111.986 47.4828 106.609 34.5188 97.049 24.9569C87.4887 15.395 74.5257 10.0162 61.0042 10.0006V10.0006ZM61.0042 121C49.1358 121.002 37.5334 117.484 27.6645 110.891C17.7956 104.298 10.1034 94.927 5.56076 83.9623C1.01814 72.9976 -0.170849 60.9321 2.14416 49.2916C4.45917 37.6512 10.1742 26.9587 18.5664 18.5664C26.9587 10.1742 37.6512 4.45915 49.2916 2.14414C60.9321 -0.170865 72.9976 1.01813 83.9623 5.56075C94.927 10.1034 104.298 17.7956 110.891 27.6645C117.484 37.5334 121.002 49.1358 121 61.0042C120.98 76.9099 114.653 92.1585 103.406 103.406C92.1585 114.653 76.9099 120.98 61.0042 121Z\"\n                fill=\"white\"\n            />\n        </svg>\n    );\n};\n\nexport const logout = () => {\n    return (\n        <svg width=\"120\" height=\"120\" viewBox=\"0 0 120 120\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M54.4506 120H25.9001C19.0308 119.992 12.4456 117.363 7.58979 112.692C2.73401 108.021 0.00438233 101.689 0 95.0848L0 32.5699C0.0065704 25.9667 2.7369 19.6355 7.59221 14.9648C12.4475 10.2941 19.0314 7.66523 25.9001 7.65469H54.3843C61.2623 7.65258 67.8598 10.2756 72.7272 14.9474C77.5946 19.6193 80.3336 25.9577 80.3424 32.5699V37.8093C80.2932 38.8958 79.8097 39.9222 78.9926 40.6743C78.1755 41.4264 77.0879 41.8463 75.9567 41.8463C74.8254 41.8463 73.7378 41.4264 72.9207 40.6743C72.1036 39.9222 71.6201 38.8958 71.571 37.8093V32.5699C71.5688 30.4022 71.1225 28.2562 70.2576 26.2543C69.3927 24.2524 68.1262 22.4339 66.5302 20.9026C64.9343 19.3713 63.0403 18.1572 60.9563 17.3296C58.8723 16.502 56.6391 16.0771 54.3843 16.0792H25.9001C21.3549 16.0876 16.9986 17.8282 13.7862 20.9195C10.5739 24.0107 8.76749 28.2003 8.76311 32.5699V95.0848C8.76749 99.4544 10.5739 103.644 13.7862 106.735C16.9986 109.826 21.3549 111.567 25.9001 111.575H54.4506C58.9804 111.569 63.3228 109.836 66.5258 106.757C69.7289 103.678 71.5313 99.5033 71.5378 95.1485V89.8533C71.587 88.7668 72.0705 87.7405 72.8876 86.9884C73.7047 86.2362 74.7923 85.8164 75.9235 85.8164C77.0548 85.8164 78.1424 86.2362 78.9595 86.9884C79.7766 87.7405 80.2601 88.7668 80.3092 89.8533V95.1485C80.3005 101.738 77.573 108.056 72.7252 112.715C67.8774 117.374 61.3053 119.994 54.4506 120V120Z\"\n                fill=\"white\"\n            />\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M115.618 68.0436H45.2568C44.1266 67.9964 43.059 67.5315 42.2766 66.746C41.4943 65.9605 41.0576 64.9149 41.0576 63.8274C41.0576 62.7398 41.4943 61.6943 42.2766 60.9087C43.059 60.1232 44.1266 59.6583 45.2568 59.6111H115.66C116.79 59.6583 117.858 60.1232 118.64 60.9087C119.422 61.6943 119.859 62.7398 119.859 63.8274C119.859 64.9149 119.422 65.9605 118.64 66.746C117.858 67.5315 116.79 67.9964 115.66 68.0436H115.618Z\"\n                fill=\"white\"\n            />\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M98.5063 84.4228C97.6474 84.4128 96.8104 84.1607 96.099 83.6978C95.3876 83.2349 94.8332 82.5816 94.5043 81.8187C94.1754 81.0558 94.0866 80.2169 94.2488 79.4059C94.411 78.595 94.8171 77.8476 95.4169 77.2564L109.406 63.8552L95.4169 50.4381C94.6485 49.64 94.2309 48.5871 94.2516 47.4997C94.2723 46.4124 94.7297 45.3749 95.528 44.6043C96.3263 43.8338 97.4037 43.3899 98.5346 43.3656C99.6656 43.3414 100.763 43.7386 101.596 44.4741L118.708 60.8453C119.117 61.2361 119.441 61.7007 119.663 62.2125C119.884 62.7242 119.998 63.2731 119.998 63.8273C119.998 64.3816 119.884 64.9305 119.663 65.4422C119.441 65.954 119.117 66.4186 118.708 66.8094L101.596 83.1886C101.191 83.5799 100.709 83.8903 100.179 84.1021C99.649 84.314 99.0805 84.4229 98.5063 84.4228V84.4228Z\"\n                fill=\"white\"\n            />\n        </svg>\n    );\n};\n\nexport const logo = () => {\n    return (\n        <svg width=\"201\" height=\"203\" viewBox=\"0 0 201 203\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n                d=\"M73.7759 81.6424C79.6796 81.6424 84.4655 76.7902 84.4655 70.8047C84.4655 64.8191 79.6796 59.9669 73.7759 59.9669C67.8722 59.9669 63.0863 64.8191 63.0863 70.8047C63.0863 76.7902 67.8722 81.6424 73.7759 81.6424Z\"\n                fill=\"white\"\n            />\n            <path\n                d=\"M74.1497 112.989C80.0534 112.989 84.8393 108.136 84.8393 102.151C84.8393 96.1653 80.0534 91.313 74.1497 91.313C68.2459 91.313 63.46 96.1653 63.46 102.151C63.46 108.136 68.2459 112.989 74.1497 112.989Z\"\n                fill=\"white\"\n            />\n            <path\n                d=\"M73.7759 144.335C79.6796 144.335 84.4655 139.482 84.4655 133.497C84.4655 127.511 79.6796 122.659 73.7759 122.659C67.8722 122.659 63.0863 127.511 63.0863 133.497C63.0863 139.482 67.8722 144.335 73.7759 144.335Z\"\n                fill=\"white\"\n            />\n            <path\n                d=\"M136.866 62.6722L136.861 62.6671C132.353 58.5919 125.439 58.9936 121.42 63.5643L94.8349 93.7948C90.8154 98.3655 91.2115 105.374 95.7198 109.45L95.7254 109.455C100.234 113.53 107.147 113.128 111.166 108.558L137.751 78.3271C141.771 73.7564 141.375 66.7474 136.866 62.6722Z\"\n                fill=\"white\"\n            />\n            <path\n                d=\"M136.444 141.723L136.45 141.718C140.987 137.676 141.434 130.67 137.448 126.07L110.406 94.8627C106.42 90.2623 99.5098 89.8092 94.9722 93.8508L94.9666 93.8558C90.429 97.8974 89.9821 104.903 93.9685 109.504L121.01 140.711C124.996 145.311 131.907 145.765 136.444 141.723Z\"\n                fill=\"white\"\n            />\n            <path\n                d=\"M162.014 164.047C149.368 176.873 133.142 185.452 115.531 188.624C97.9189 191.796 79.7714 189.407 63.5423 181.782C58.7656 179.834 27.8927 188.504 21.1948 181.721C14.497 174.938 23.0487 143.615 21.1276 138.779C14.4017 124.104 11.7738 107.839 13.5299 91.7551C15.2859 75.6709 21.3586 60.3828 31.0873 47.5539C40.816 34.7249 53.8283 24.8462 68.7087 18.9925C83.5891 13.1388 99.7679 11.534 115.485 14.3529C131.202 17.1718 145.856 24.3063 157.853 34.9805C169.85 45.6546 178.73 59.4596 183.527 74.8938C188.324 90.328 188.855 106.8 185.062 122.519C181.269 138.238 173.298 152.602 162.014 164.047V164.047Z\"\n                stroke=\"white\"\n                strokeWidth=\"25\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n        </svg>\n    );\n};\n\nexport const conversation = () => {\n    return (\n        <svg width=\"120\" height=\"120\" viewBox=\"0 0 120 120\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g>\n                <path\n                    fillRule=\"evenodd\"\n                    clipRule=\"evenodd\"\n                    d=\"M28.5214 104.252C31.7989 104.252 34.8143 105.481 38.0509 106.784C49.0586 112.002 61.5574 113.16 73.3364 110.052C85.1154 106.944 95.4157 99.7705 102.415 89.8005C109.415 79.8305 112.663 67.7064 111.584 55.5728C110.506 43.4391 105.171 32.0778 96.5224 23.4984C91.7285 18.7022 86.0365 14.8975 79.7717 12.3016C73.5068 9.70579 66.7919 8.36971 60.0105 8.36971C53.229 8.36971 46.5141 9.70579 40.2492 12.3016C33.9844 14.8975 28.2924 18.7022 23.4985 23.4984C16.0361 30.9984 11.0459 40.6011 9.19757 51.0182C7.34924 61.4353 8.73114 72.1685 13.1579 81.7778C14.4607 85.006 15.7226 88.1604 15.7226 91.4296C15.7226 94.6987 14.6 97.9842 13.6167 100.885C12.7973 103.277 11.5683 106.882 12.3549 107.669C13.1415 108.455 16.7632 107.21 19.1558 106.391C22.0318 105.407 25.293 104.277 28.5214 104.252ZM59.8712 119.992C51.1873 119.998 42.6062 118.114 34.7242 114.469C32.3561 113.519 30.1438 112.626 28.5542 112.626C26.7187 112.626 24.2606 113.486 21.8843 114.305C16.968 115.944 10.9291 118.074 6.4307 113.593C1.93226 109.111 4.0217 103.056 5.68505 98.1809C6.50444 95.7802 7.32383 93.2649 7.32383 91.4296C7.32383 89.8892 6.58638 87.9228 5.44743 85.0961C0.352134 73.9481 -1.21843 61.5105 0.945705 49.446C3.10984 37.3814 8.90555 26.265 17.558 17.5828C24.5388 10.5993 33.1354 5.44655 42.5851 2.58145C52.0348 -0.283645 62.0456 -0.772484 71.7295 1.15829C81.4134 3.08907 90.4712 7.37978 98.0993 13.6498C105.727 19.9199 111.69 27.9755 115.459 37.1021C119.227 46.2288 120.685 56.1443 119.702 65.9692C118.72 75.7942 115.328 85.2249 109.827 93.4248C104.326 101.625 96.8863 108.34 88.1677 112.976C79.4491 117.612 69.7211 120.024 59.8466 120L59.8712 119.992Z\"\n                    fill=\"white\"\n                />\n                <path\n                    fillRule=\"evenodd\"\n                    clipRule=\"evenodd\"\n                    d=\"M82.0438 67.9064C80.5994 67.8578 79.2299 67.2515 78.223 66.2147C77.216 65.178 76.65 63.7915 76.6436 62.3463C76.6372 60.9011 77.1911 59.5096 78.1888 58.4641C79.1866 57.4185 80.5507 56.8002 81.9947 56.7388H82.0438C82.7952 56.7101 83.5445 56.8332 84.2472 57.1008C84.9498 57.3685 85.5911 57.7751 86.1329 58.2965C86.6746 58.8178 87.1055 59.4431 87.3999 60.1349C87.6943 60.8267 87.846 61.5708 87.846 62.3226C87.846 63.0744 87.6943 63.8185 87.3999 64.5103C87.1055 65.2021 86.6746 65.8274 86.1329 66.3488C85.5911 66.8701 84.9498 67.2768 84.2472 67.5444C83.5445 67.8121 82.7952 67.9352 82.0438 67.9064V67.9064Z\"\n                    fill=\"white\"\n                />\n                <path\n                    fillRule=\"evenodd\"\n                    clipRule=\"evenodd\"\n                    d=\"M59.6663 67.9064C58.2218 67.8578 56.8523 67.2515 55.8454 66.2148C54.8385 65.178 54.2724 63.7915 54.266 62.3463C54.2597 60.9011 54.8135 59.5097 55.8113 58.4641C56.809 57.4186 58.1731 56.8002 59.6171 56.7389H59.6663C61.1103 56.7942 62.4767 57.4067 63.4787 58.4478C64.4808 59.4889 65.0406 60.8777 65.0406 62.3227C65.0406 63.7676 64.4808 65.1564 63.4787 66.1975C62.4767 67.2386 61.1103 67.8511 59.6663 67.9064V67.9064Z\"\n                    fill=\"white\"\n                />\n                <path\n                    fillRule=\"evenodd\"\n                    clipRule=\"evenodd\"\n                    d=\"M37.289 67.9064C35.8445 67.8578 34.475 67.2515 33.4681 66.2148C32.4612 65.178 31.8951 63.7915 31.8887 62.3463C31.8824 60.9011 32.4362 59.5097 33.434 58.4641C34.4317 57.4186 35.7958 56.8002 37.2398 56.7389H37.289C38.7329 56.7942 40.0994 57.4067 41.1014 58.4478C42.1035 59.4889 42.6632 60.8777 42.6632 62.3227C42.6632 63.7676 42.1035 65.1564 41.1014 66.1975C40.0994 67.2386 38.7329 67.8511 37.289 67.9064Z\"\n                    fill=\"white\"\n                />\n            </g>\n        </svg>\n    );\n};\n\nexport const addFriend = () => {\n    return (\n        <svg width=\"121\" height=\"120\" viewBox=\"0 0 121 120\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M47.2605 84.6071C21.8784 84.6071 9.00161 89.0151 9.00161 97.6938C9.00161 106.372 21.9187 110.91 47.2605 110.91C72.6023 110.91 85.5274 106.502 85.5274 97.8229C85.5274 89.1442 72.6588 84.6071 47.2605 84.6071ZM47.2605 120C35.5705 120 0 120 0 97.6857C0 77.8095 26.9726 75.5086 47.2605 75.5086C58.9505 75.5086 94.521 75.5086 94.521 97.8229C94.521 117.707 67.5565 120 47.2605 120Z\"\n                fill=\"white\"\n            />\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M47.2605 9.09043C42.7172 9.1603 38.2939 10.5599 34.5374 13.1162C30.7808 15.6725 27.8556 19.2736 26.1233 23.4743C24.391 27.6749 23.9275 32.2911 24.7901 36.7524C25.6526 41.2136 27.8035 45.3243 30.9769 48.5764C33.0798 50.7283 35.5912 52.4387 38.3638 53.6074C41.1364 54.776 44.1144 55.3794 47.1233 55.3821L47.2847 59.9354V55.3821C53.4234 55.3821 59.3106 52.9436 63.6513 48.6029C67.992 44.2622 70.4306 38.3749 70.4306 32.2363C70.4306 26.0976 67.992 20.2104 63.6513 15.8697C59.3106 11.529 53.4234 9.09043 47.2847 9.09043H47.2605ZM47.2605 64.4806H47.0748C42.8852 64.4731 38.7393 63.6295 34.8799 61.9992C31.0205 60.3689 27.5253 57.9848 24.599 54.9865C18.6181 48.9243 15.2876 40.7361 15.3391 32.2201C15.4155 25.9266 17.3517 19.7962 20.904 14.6005C24.4563 9.40477 29.466 5.37577 35.3027 3.02048C41.1394 0.665203 47.5424 0.0888718 53.7059 1.36401C59.8694 2.63915 65.518 5.70879 69.941 10.1867C74.3641 14.6646 77.3639 20.3506 78.5629 26.5293C79.762 32.7081 79.1068 39.1034 76.6798 44.9107C74.2527 50.7179 70.1623 55.6776 64.9232 59.1656C59.684 62.6536 53.5303 64.5141 47.2363 64.5129L47.2605 64.4806Z\"\n                fill=\"white\"\n            />\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M103.224 69.2923C102.024 69.2837 100.877 68.7995 100.034 67.9458C99.1906 67.0921 98.7207 65.9388 98.7271 64.739V40.4306C98.7271 39.238 99.2009 38.0942 100.044 37.2509C100.887 36.4076 102.031 35.9338 103.224 35.9338C104.417 35.9338 105.56 36.4076 106.404 37.2509C107.247 38.0942 107.721 39.238 107.721 40.4306V64.739C107.727 65.9388 107.257 67.0921 106.414 67.9458C105.571 68.7995 104.424 69.2837 103.224 69.2923Z\"\n                fill=\"white\"\n            />\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M115.503 57.126H90.9607C89.7552 57.126 88.5991 56.6471 87.7468 55.7947C86.8944 54.9423 86.4155 53.7862 86.4155 52.5807C86.4155 51.3753 86.8944 50.2192 87.7468 49.3668C88.5991 48.5144 89.7552 48.0355 90.9607 48.0355H115.503C116.709 48.0355 117.865 48.5144 118.717 49.3668C119.57 50.2192 120.048 51.3753 120.048 52.5807C120.048 53.7862 119.57 54.9423 118.717 55.7947C117.865 56.6471 116.709 57.126 115.503 57.126V57.126Z\"\n                fill=\"white\"\n            />\n        </svg>\n    );\n};\n\nexport const addAttachment = () => {\n    return (\n        <svg width=\"121\" height=\"150\" viewBox=\"0 0 121 150\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M33.1818 12.26C27.5458 12.286 22.14 14.6297 18.1057 18.7962C14.0714 22.9627 11.7244 28.6259 11.5603 34.59V115.29C11.5064 118.196 11.994 121.084 12.9951 123.791C13.9963 126.497 15.4914 128.968 17.395 131.062C19.2986 133.156 21.5733 134.833 24.0892 135.996C26.6052 137.159 29.3129 137.785 32.0577 137.84H89.479C95.0683 137.746 100.399 135.33 104.321 131.114C108.244 126.897 110.445 121.218 110.449 115.3V48.3L77.8323 12.3H33.1818V12.26ZM31.9633 149C23.6239 148.858 15.6789 145.217 9.8732 138.878C4.06754 132.539 0.876072 124.019 0.999806 115.19V34.45C1.21801 25.555 4.69652 17.0989 10.6993 10.8709C16.7021 4.64282 24.7582 1.13154 33.1629 1.08H80.0804C80.7869 1.08453 81.4853 1.2391 82.1343 1.53454C82.7833 1.82998 83.3697 2.2603 83.8587 2.8L119.507 42.13C120.443 43.1746 120.964 44.5602 120.962 46V115.29C120.948 124.15 117.646 132.649 111.767 138.955C105.888 145.261 97.9038 148.869 89.5357 149H31.9633Z\"\n                fill=\"white\"\n            />\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M115.701 53H96.318C90.1272 52.9789 84.1957 50.3653 79.819 45.7299C75.4423 41.0945 72.9759 34.8141 72.9584 28.26V6.59001C72.9283 5.83669 73.0425 5.08471 73.294 4.37931C73.5456 3.67392 73.9293 3.02968 74.4221 2.48537C74.915 1.94107 75.5067 1.50794 76.1618 1.21205C76.8169 0.91616 77.5217 0.763626 78.2339 0.763626C78.9462 0.763626 79.651 0.91616 80.3061 1.21205C80.9611 1.50794 81.5529 1.94107 82.0458 2.48537C82.5386 3.02968 82.9223 3.67392 83.1739 4.37931C83.4254 5.08471 83.5396 5.83669 83.5094 6.59001V28.26C83.5169 31.8593 84.8689 35.3094 87.2703 37.8574C89.6717 40.4053 92.9276 41.8442 96.3275 41.86H115.701C117.061 41.921 118.347 42.536 119.289 43.5768C120.232 44.6175 120.758 46.0034 120.758 47.445C120.758 48.8866 120.232 50.2725 119.289 51.3133C118.347 52.354 117.061 52.969 115.701 53.03V53Z\"\n                fill=\"white\"\n            />\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M76.9635 87.9H42.4861C41.0857 87.9 39.7427 87.3111 38.7525 86.2627C37.7622 85.2144 37.2059 83.7926 37.2059 82.31C37.2059 80.8274 37.7622 79.4056 38.7525 78.3573C39.7427 77.3089 41.0857 76.72 42.4861 76.72H76.9635C78.3639 76.72 79.7069 77.3089 80.6972 78.3573C81.6874 79.4056 82.2437 80.8274 82.2437 82.31C82.2437 83.7926 81.6874 85.2144 80.6972 86.2627C79.7069 87.3111 78.3639 87.9 76.9635 87.9V87.9Z\"\n                fill=\"white\"\n            />\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M59.7248 106.15C58.326 106.15 56.9844 105.562 55.9945 104.516C55.0045 103.47 54.4471 102.051 54.4446 100.57V64.06C54.4446 62.5774 55.0009 61.1556 55.9911 60.1073C56.9814 59.0589 58.3244 58.47 59.7248 58.47C61.1252 58.47 62.4683 59.0589 63.4585 60.1073C64.4487 61.1556 65.005 62.5774 65.005 64.06V100.57C65.005 101.304 64.8684 102.03 64.6029 102.708C64.3374 103.385 63.9484 104.001 63.4579 104.519C62.9675 105.037 62.3853 105.448 61.7447 105.728C61.1042 106.008 60.4178 106.151 59.7248 106.15V106.15Z\"\n                fill=\"white\"\n            />\n        </svg>\n    );\n};\n\nexport const controlArrow = () => {\n    return (\n        <svg width=\"134\" height=\"120\" viewBox=\"0 0 134 120\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n                d=\"M39.0442 104.988C41.7605 107.438 46.1399 107.438 48.8562 104.988L94.9225 63.4375C97.0844 61.4875 97.0844 58.3375 94.9225 56.3875L48.8562 14.8375C46.1399 12.3875 41.7605 12.3875 39.0442 14.8375C36.3279 17.2875 36.3279 21.2375 39.0442 23.6875L79.179 59.9375L38.9888 96.1875C36.3279 98.5875 36.3279 102.588 39.0442 104.988V104.988Z\"\n                fill=\"white\"\n            />\n        </svg>\n    );\n};\n","import \"../css/userDetail.css\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\n\nclass UserDetail extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.getUsername = this.getUsername.bind(this);\n    }\n\n    getUsername() {\n        let username = \"\";\n        this.props.user.conversation.forEach((user) => {\n            if (user.userId === this.props.UI.convWindow.selectedUserId) username = user.username;\n        });\n        return username;\n    }\n\n    render() {\n        return this.props.UI.convWindow.isSelected ? (\n            <div className=\"user-detail user-detail-show\">\n                <img src=\"/static/assets/images/profile.svg\" alt=\" \" />\n                <span>{this.getUsername()}</span>\n            </div>\n        ) : (\n            <div className=\"user-detail user-detail-hidden\"></div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    user: state.user,\n    UI: state.UI,\n});\n\nexport default connect(mapStateToProps, {})(UserDetail);\n","import \"../css/option.css\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport UserDetail from \"./UserDetail\";\nimport { conversation, addFriend, settings, logout } from \"../images/svgs\";\nimport { chatNewConversationWindow, openConvWindow } from \"../redux/slice/UI\";\n\nclass Option extends React.Component {\n    render() {\n        return (\n            <div className=\"option\">\n                <UserDetail />\n                <div className=\"controls\">\n                    <div\n                        className=\"control-svg tab-conversation\"\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.props.openConvWindow({ userId: null, isSelected: false });\n                        }}\n                    >\n                        {conversation()}\n                    </div>\n                    <div\n                        className=\"control-svg tab-add\"\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.props.chatNewConversationWindow({ value: true });\n                        }}\n                    >\n                        {addFriend()}\n                    </div>\n                    <div className=\"control-svg tab-settings\">{settings()}</div>\n                    <div\n                        className=\"control-svg tab-logout\"\n                        onClick={(e) => {\n                            e.preventDefault();\n                        }}\n                    >\n                        {logout()}\n                    </div>\n                </div>\n                <div className=\"me-photo\">\n                    <img\n                        src=\"/static/assets/images/profile.svg\"\n                        height=\"40px\"\n                        width=\"40px\"\n                        alt=\"profile\"\n                        style={{ display: \"flex\", margin: \"auto\" }}\n                    />\n                </div>\n            </div>\n        );\n    }\n}\nconst mapStateToProps = (state) => ({\n    user: state.user,\n    UI: state.UI,\n});\n\nexport default connect(mapStateToProps, { chatNewConversationWindow, openConvWindow })(Option);\n","import \"../css/search.css\";\nimport React from \"react\";\n\nimport { search } from \"../images/svgs\";\n\nclass Search extends React.Component {\n    render() {\n        return (\n            <div className=\"search\">\n                <div className=\"search-logo\">{search()}</div>\n                <input\n                    type=\"text\"\n                    placeholder=\"Search\"\n                    onKeyPress={(e) => {\n                        console.log(e);\n                    }}\n                />\n            </div>\n        );\n    }\n}\n\nexport default Search;\n","import \"../css/users.css\";\nimport React, { createRef } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { openConvWindow } from \"../redux/slice/UI\";\nimport { timeCalcl } from \"../utils\";\nclass Users extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.convList = createRef();\n    }\n\n    getLastMsg = (chatLog) => {\n        const lmsg = chatLog[chatLog.length - 1];\n\n        return lmsg.data.length > 20 ? lmsg.data.substring(0.2) + \"...\" : lmsg.data;\n    };\n\n    makeConversationList = () => {\n        // const convList = this.props.user.conversation\n        //     ? this.props.user.conversation.sort((conv1, conv2) => {\n        //           return conv1.username - conv2.username;\n        //       })\n        //     : null;\n\n        // console.log(convList);\n\n        let list = this.props.user.conversation.map((conv) => {\n            return (\n                <li\n                    key={conv.userId}\n                    onClick={(e) => {\n                        e.preventDefault();\n                        this.props.openConvWindow({ isSelected: true, userId: conv.userId });\n                    }}\n                >\n                    <img\n                        src=\"/static/assets/images/profile.svg\"\n                        height=\"40px\"\n                        width=\"40px\"\n                        alt=\"profile\"\n                        className=\"profile\"\n                    />\n                    <div className=\"name\">{conv.username}</div>\n                    <div className=\"lastMsg\">{conv.chatLog.length > 0 ? this.getLastMsg(conv.chatLog) : \"\"}</div>\n                    <div className=\"lastMsgTime\">{conv.chatLog.length > 0 ? timeCalcl(conv.chatLog[0].time) : \"\"}</div>\n                </li>\n            );\n        });\n        return list;\n    };\n\n    render() {\n        return (\n            <>\n                <div className=\"users\">\n                    <ul className=\"users-list\">{this.makeConversationList()}</ul>\n                </div>\n            </>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    user: state.user,\n    UI: state.UI,\n});\n\nexport default connect(mapStateToProps, { openConvWindow })(Users);\n","import \"../css/conversation.css\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { v4 as uuid } from \"uuid\";\nimport { send } from \"../images/svgs\";\nimport { timeCalcl } from \"../utils\";\n\nimport { newMessage } from \"../redux/slice/user\";\n\nfunction Conversation() {\n    let { signalProtocalManager, socket, username, userId } = useSelector((state) => state.user);\n    let { selectedUserId } = useSelector((state) => state.UI.convWindow);\n\n    let convUserObj = useSelector((state) => {\n        let temp = [];\n        state.user.conversation.forEach((conv) => {\n            if (conv.userId === state.UI.convWindow.selectedUserId) {\n                temp = conv;\n                return;\n            }\n        });\n        return temp;\n    });\n\n    const [message, setMessage] = useState(\"\");\n    const dispatch = useDispatch();\n\n    const scrollBar = useRef(null);\n    useEffect(() => {\n        scrollBar.current.scrollTop = 9999999;\n    });\n\n    useEffect(() => {\n        setMessage(\"\");\n    }, [selectedUserId]);\n\n    const renderMessageList = () => {\n        let chatLog = convUserObj.chatLog;\n\n        if (!chatLog || chatLog.length <= 0) return <></>;\n\n        let List = chatLog.map((msg) => {\n            return (\n                <li className=\"messageWrap\" key={msg.msgId}>\n                    <div className={msg.origin ? \"messageBox self\" : \"messageBox nself\"}>\n                        <span className=\"messageData\">{msg.data}</span>\n                        <span className={msg.origin ? \"messageTime rightTime\" : \"messageTime leftTime\"}>\n                            {timeCalcl(msg.time)}\n                        </span>\n                    </div>\n                </li>\n            );\n        });\n        return List;\n    };\n\n    const sendMessage = async () => {\n        try {\n            const encryptedMessage = await signalProtocalManager.encryptMessageAsync(convUserObj.userId, message);\n\n            let _msgToSend = {\n                data: encryptedMessage,\n                type: \"msg/text\",\n                time: Date.now(),\n                receiver: {\n                    username: convUserObj.username,\n                    userId: convUserObj.userId,\n                },\n                sender: {\n                    username: username,\n                    userId: userId,\n                },\n            };\n\n            socket.emit(\"send-message\", { _msgToSend }, (response) => {\n                if (!response) {\n                    return; //message didnt not send : true or false\n                }\n                let msgObj = {\n                    data: message,\n                    type: _msgToSend.type,\n                    time: _msgToSend.time,\n                    origin: true,\n                    msgId: uuid(),\n                };\n\n                dispatch(newMessage({ username: _msgToSend.receiver.username, msgObj: msgObj }));\n                setMessage(\"\");\n            });\n        } catch (error) {\n            console.log(error);\n        }\n    };\n\n    const handleInput = async (e) => {\n        let value = e.target.value.trimStart();\n        if (value.length <= 0 || value.length > 256) {\n            setMessage(\"\");\n            return;\n        }\n        setMessage(value);\n    };\n\n    return (\n        <React.Fragment>\n            <div className=\"conversation\">\n                <div className=\"messageList\">\n                    <ul className=\"msgList\" ref={scrollBar}>\n                        {renderMessageList()}\n                    </ul>\n                </div>\n                <div className=\"messageInput\">\n                    <input\n                        type=\"text\"\n                        className=\"messageInputText\"\n                        name=\"messageInputText\"\n                        id=\"messageInputText\"\n                        placeholder=\"Type a message...\"\n                        value={message}\n                        onInput={handleInput}\n                        onKeyPress={async (e) => {\n                            if (e.code === \"Enter\") await sendMessage();\n                        }}\n                    />\n                    <div\n                        className=\"sendBtn\"\n                        onClick={async (e) => {\n                            e.preventDefault();\n                            await sendMessage();\n                        }}\n                    >\n                        {send()}\n                    </div>\n                </div>\n            </div>\n        </React.Fragment>\n    );\n}\n\nexport default Conversation;\n","import \"../css/addFriend.css\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\n\nimport { chatNewConversationWindow, openConvWindow } from \"../redux/slice/UI\";\nimport { newConversation } from \"../redux/slice/user\";\n\nclass AddFriend extends React.PureComponent {\n    constructor(props) {\n        super(props);\n\n        this.usernameRef = React.createRef();\n        this.errorMessageRef = React.createRef();\n        this.state = {\n            username: \"\",\n            validUsername: false,\n        };\n\n        this.usernameRegex = /^[a-zA-Z_][a-zA-Z0-9._]{4,30}$/i;\n\n        this.matchUsername = this.matchUsername.bind(this);\n        this.renderValidate = this.renderValidate.bind(this);\n        this.fetchUser = this.fetchUser.bind(this);\n        this.validateUsername = this.validateUsername.bind(this);\n        this.handleInput = this.handleInput.bind(this);\n    }\n\n    renderValidate = (control, errorMsg) => {\n        if (control === \"\") {\n            this.usernameRef.current.classList.add(\"pad\");\n            this.usernameRef.current.classList.remove(\"not-valid\");\n            this.usernameRef.current.classList.remove(\"valid\");\n\n            this.errorMessageRef.current.classList.remove(\"valid-msg\");\n            this.errorMessageRef.current.classList.remove(\"not-valid-msg\");\n            this.errorMessageRef.current.innerText = \"\";\n        } else if (control === \"valid\") {\n            this.usernameRef.current.classList.remove(\"pad\");\n            this.usernameRef.current.classList.remove(\"not-valid\");\n            this.usernameRef.current.classList.add(\"valid\");\n\n            this.errorMessageRef.current.classList.add(\"valid-msg\");\n            this.errorMessageRef.current.classList.remove(\"not-valid-msg\");\n            this.errorMessageRef.current.innerText = \"\";\n        } else {\n            this.usernameRef.current.classList.remove(\"pad\");\n            this.usernameRef.current.classList.add(\"not-valid\");\n            this.usernameRef.current.classList.remove(\"valid\");\n\n            this.errorMessageRef.current.classList.remove(\"valid-msg\");\n            this.errorMessageRef.current.classList.add(\"not-valid-msg\");\n            this.errorMessageRef.current.innerText = errorMsg;\n        }\n    };\n\n    matchUsername = () => {\n        return this.usernameRegex.test(this.state.username);\n    };\n\n    fetchUser = async () => {\n        const response = await axios\n            .post(\"/api/v1/username\", { data: { username: this.state.username } })\n            .then((res) => res);\n        if (response.status !== 200 || response.data.code !== 200) return false;\n\n        return !response.data.available;\n    };\n\n    validateUsername = async () => {\n        if (this.state.username === \"\") {\n            this.setState({ validUsername: false });\n            this.renderValidate(\"\", \"\");\n            return;\n        }\n\n        let passRegex = this.matchUsername();\n        if (!passRegex) {\n            this.renderValidate(\"not-valid\", \"username didn't match!\");\n            this.setState({ validUsername: false });\n            return;\n        }\n\n        if (this.state.username === this.props.user.username) {\n            this.renderValidate(\"not-valid\", \"self conversation is not allowed!\");\n            this.setState({ validUsername: false });\n            return;\n        }\n        let exist = await this.fetchUser();\n\n        if (!exist) {\n            this.renderValidate(\"not-valid\", \"user does not exit!\");\n            this.setState({ validUsername: false });\n            return;\n        }\n\n        this.renderValidate(\"valid\", \"\");\n        this.setState({ validUsername: true });\n    };\n\n    usernameTimeOut;\n    handleInput = (event) => {\n        event.preventDefault();\n        this.setState({ username: event.target.value.trim() });\n        clearTimeout(this.usernameTimeOut);\n        this.usernameTimeOut = setTimeout(() => {\n            this.validateUsername();\n        }, 600);\n    };\n\n    sendBtnTimeOut;\n    handleChat = (event) => {\n        event.preventDefault();\n        clearTimeout(this.sendBtnTimeOut);\n        if (!this.state.validUsername) {\n            this.renderValidate(\"not-valid\", \"enter username\");\n            return;\n        }\n\n        this.sendBtnTimeOut = setTimeout(async () => {\n            let response = await axios\n                .get(`/api/v1/user/?username=${this.state.username}`)\n                .then((res) => res)\n                .catch((error) => {\n                    console.log(error);\n                    return;\n                });\n            if (response.status !== 200 || response.data.code !== 200) {\n                this.renderValidate(\"not-valid\", \"server error!\");\n                this.setState({ validUsername: false });\n                return;\n            }\n            const { userId, name } = response.data.data;\n            let conv = {\n                username: this.state.username,\n                userId: userId,\n                name: name,\n                chatLog: [],\n            };\n            this.setState({ username: \"\", validUsername: false });\n            this.props.chatNewConversationWindow({ value: false });\n            this.props.newConversation({ conv });\n        }, 600);\n    };\n\n    render() {\n        return (\n            <div className=\"template-add-friend\">\n                <div className=\"add-friend\">\n                    <span className=\"title\">New Conversation</span>\n                    <div className=\"i\">\n                        <input\n                            type=\"text\"\n                            name=\"username\"\n                            className=\"f-input pad\"\n                            value={this.state.username}\n                            ref={this.usernameRef}\n                            placeholder=\"username\"\n                            spellCheck=\"false\"\n                            autoCapitalize=\"off\"\n                            onInput={this.handleInput}\n                        />\n                        <span className=\"errorMessage\" ref={this.errorMessageRef}></span>\n                        <div className=\"f-control\">\n                            <div\n                                className=\"btn-close\"\n                                onClick={(e) => {\n                                    e.preventDefault();\n                                    this.setState({ username: \"\", validUsername: false });\n                                    this.props.chatNewConversationWindow({ value: false });\n                                }}\n                            >\n                                close\n                            </div>\n                            <div className=\"btn-chat\" onClick={this.handleChat}>\n                                chat\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        user: state.user,\n        UI: state.UI,\n    };\n};\n\nexport default connect(mapStateToProps, { chatNewConversationWindow, newConversation, openConvWindow })(AddFriend);\n","import \"./css/base.css\";\nimport \"./css/template.css\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { newMessage, init } from \"./redux/slice/user\";\nimport { openConvWindow } from \"./redux/slice/UI\";\nimport { createSignalProtocolManager, SignalServerStore } from \"./signal/SignalGateway\";\nimport { getConversation } from \"./utils\";\nimport { io } from \"socket.io-client\";\nimport axios from \"axios\";\nimport util from \"./signal/helpers\";\n\nimport Logo from \"./components/Logo\";\nimport Option from \"./components/Option\";\nimport Search from \"./components/Search\";\nimport Users from \"./components/Users\";\nimport Conversation from \"./components/Conversation\";\nimport AddFriend from \"./components/AddFriend\";\nimport { controlArrow } from \"./images/svgs\";\n\nimport { v4 as uuid } from \"uuid\";\n\n// let messageSocket = null;\n\nclass App extends React.PureComponent {\n    constructor(props) {\n        super(props);\n\n        this.init = this.props.init.bind(this);\n        this.newMessage = this.props.newMessage.bind(this);\n        this.state = {\n            SignalServer: new SignalServerStore(),\n        };\n    }\n\n    async componentDidMount() {\n        const response = await axios\n            .get(\"/api/v1/config\", {\n                headers: {\n                    cookies: {\n                        _token: util.getCookie(\"_token\"),\n                    },\n                },\n            })\n            .then((res) => res.data)\n            .catch((error) => console.log(error));\n\n        // socket\n        const socket = new io(\"/chat\", {\n            path: \"/sockets\",\n            autoConnect: true,\n            reconnectionDelay: 1000,\n            withCredentials: true,\n            forceNew: false,\n            reconnectionAttempts: 3,\n            // extraHeaders: {\n            //     \"Access-Control-Allow-Origin\": \"http://localhost\",\n            // },\n            query: {\n                userId: response.data.userId,\n            },\n        });\n\n        const savedConv = getConversation(response.data.userId);\n        createSignalProtocolManager(response.data.userId, this.state.SignalServer)\n            .then((signalProtocalManager) => {\n                var userState = {\n                    ...response.data,\n                    signalProtocalManager,\n                    savedConv,\n                    socket: socket,\n                };\n\n                this.init(userState);\n\n                //incoming message listener\n                socket.on(\"receive-message\", async (_msgToSend) => {\n                    if (!_msgToSend) return;\n\n                    const decryptedMessage = await signalProtocalManager.decryptMessageAsync(\n                        _msgToSend.sender.userId,\n                        _msgToSend.data,\n                    );\n\n                    let msgObj = {\n                        data: decryptedMessage,\n                        type: _msgToSend.type,\n                        time: _msgToSend.time,\n                        origin: false,\n                        msgId: uuid(),\n                    };\n\n                    this.newMessage({ username: _msgToSend.sender.username, msgObj: msgObj });\n                });\n            })\n            .catch((error) => console.log(error));\n    }\n\n    render() {\n        return (\n            <div className=\"base\">\n                {this.props.UI.newConversationWindow.isOpen ? <AddFriend /> : <></>}\n                <div className=\"template m-menu-area\">\n                    <div className=\"template-logo\">\n                        <Logo />\n                    </div>\n                    <div className=\"template-options\">\n                        <Option />\n                    </div>\n                    <div className=\"template-search\">\n                        <Search />\n                    </div>\n                    <div className=\"template-users\">\n                        <Users convObjRef={this.convObjRef} />\n                    </div>\n                    {/* <div className=\"template-converstion\">\n                        {this.props.UI.convWindow.isSelected ? (\n                            <>\n                                <div className=\"backBtn\">{controlArrow()}</div>\n                                <Conversation />\n                            </>\n                        ) : (\n                            <></>\n                        )}\n                    </div> */}\n                    {this.props.UI.convWindow.isSelected ? (\n                        <div className=\"template-converstion\">\n                            <>\n                                <div\n                                    className=\"backBtn\"\n                                    onClick={(e) => {\n                                        e.preventDefault();\n                                        this.props.openConvWindow({ userId: null, isSelected: false });\n                                    }}\n                                >\n                                    {controlArrow()}\n                                </div>\n                                <Conversation />\n                            </>\n                        </div>\n                    ) : (\n                        <></>\n                    )}\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    user: state.user,\n    UI: state.UI,\n});\n\nexport default connect(mapStateToProps, { init, newMessage, openConvWindow })(App);\n\n// s:9ucmGEXOcUUINEQh4n3NN3z9qICtmfjs.aOxcRwCW/AaKb//ue+uK+XprDJ+na8qs6+QxD69wYrc\n// s%3Aq-JIvrDmtZ7IjqQMbpiA3DZoSJooutFY.XcG5QsrN6RZ2dQluxyIbfJZgHT2WmOhYUJYah2uhdOY\n","import { combineReducers } from \"redux\";\nimport thunk from \"redux-thunk\";\n\nimport userReducer from \"./user\";\nimport UI from \"./UI\";\n\nconst reducers = combineReducers({\n    user: userReducer,\n    UI: UI,\n    middleware: [thunk],\n});\n\nexport default reducers;\n","import { createStore } from \"redux\";\nimport reducers from \"./slice\";\n\nconst store = createStore(reducers, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n\nexport default store;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\n\nimport store from \"./redux\";\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById(\"root\"),\n);\n"],"sourceRoot":""}