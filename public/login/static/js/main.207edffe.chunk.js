(this.webpackJsonplogin=this.webpackJsonplogin||[]).push([[0],{10:function(e,r,a){},25:function(e,r,a){},26:function(e,r,a){},47:function(e,r,a){"use strict";a.r(r);var t=a(1),s=a.n(t),n=a(19),i=a.n(n),o=a(4),l=a(5),c=a(7),u=a(6),d=(a(25),a(26),a(3)),m=a.n(d),p=a(8),v=(a(10),a.p+"static/media/right_arrow.0bd9f4cc.svg"),h=a(20),f=a.n(h).a.create({headers:{"Content-Type":"application/json; charset=utf-8"}}),j=/^[a-zA-Z_][a-zA-Z0-9._]{4,30}$/i,w=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i,b=function(e){return f.post("/api/v1/username",{data:{username:e}}).then((function(e){return e}))},x=function(e,r){return f.post("/api/v1/signin",{data:{username:e,password:r}}).then((function(e){return e}))};function O(e){return j.test(e)}var g=function(e){e.classList.add("pad"),e.classList.remove("valid"),e.classList.remove("not-valid")},E=function(e){e.classList.add("valid"),e.classList.remove("not-valid"),e.classList.remove("pad")},P=function(e){e.classList.add("not-valid"),e.classList.remove("valid"),e.classList.remove("pad")},N=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r?(e.classList.add("greenText"),e.classList.remove("redText")):(e.classList.add("redText"),e.classList.remove("greenText"))},U=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pad",a=arguments.length>2?arguments[2]:void 0,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];switch(r){case"valid":E(e);break;case"not-valid":P(e);break;case"pad":default:g(e)}N(a,s),a.innerText=t},S=a(0),k=function(e){Object(c.a)(a,e);var r=Object(u.a)(a);function a(e){var t;return Object(o.a)(this,a),(t=r.call(this,e)).state={username:"",validUsername:!1,password:"",validPassword:!1},t.renderValidUsername=Object(p.a)(m.a.mark((function e(){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.state.username)<1)){e.next=6;break}U(t.inUsername.current,null,t.inUsernameError.current,null,!1),t.setState({validUsername:!1,username:""}),e.next=23;break;case 6:if(O(t.state.username)){e.next=11;break}U(t.inUsername.current,"not-valid",t.inUsernameError.current,"Not a valid username!",!1),t.setState({validUsername:!1}),e.next=23;break;case 11:return e.prev=11,e.next=14,b(r).then((function(e){return e.data}));case 14:e.sent.available?(U(t.inUsername.current,"not-valid",t.inUsernameError.current,"User not registered!",!1),t.setState({validUsername:!1})):(U(t.inUsername.current,"valid",t.inUsernameError.current,null,!0),t.setState({validUsername:!0})),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(11),console.log(e.t0),U(t.inUsername.current,"not-valid",t.inUsernameError.current,"Please try again later!",!1),t.setState({validUsername:!1});case 23:case"end":return e.stop()}}),e,null,[[11,18]])}))),t.validateUsername=function(e){e.preventDefault(),t.setState({username:e.target.value.trim()}),clearTimeout(t.usernameTimeOut),t.usernameTimeOut=setTimeout((function(){t.renderValidUsername()}),500)},t.validatePassword=function(e){e.preventDefault(),t.setState({password:e.target.value.trim()}),clearTimeout(t.passwordTimeOut),t.passwordTimeOut=setTimeout((function(){t.renderValidPassword()}),700)},t.onSignin=function(){var e=Object(p.a)(m.a.mark((function e(r){var a,s,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),t.state.validUsername){e.next=6;break}return U(t.inUsername.current,"not-valid",t.inUsernameError.current,"Username required!",!1),e.abrupt("return");case 6:if(t.state.validPassword){e.next=9;break}return U(t.inPassword.current,"not-valid",t.inPasswordError.current,"Password required!",!1),e.abrupt("return");case 9:return a=t.state.username,s=t.state.password,e.next=13,x(a,s);case 13:301===(n=e.sent).data.code?window.location.pathname=n.data.redirect:U(t.inPassword.current,"not-valid",t.inPasswordError.current,n.data.message,!1);case 15:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),t.inUsername=s.a.createRef(),t.inUsernameError=s.a.createRef(),t.inPassword=s.a.createRef(),t.inPasswordError=s.a.createRef(),t}return Object(l.a)(a,[{key:"renderValidPassword",value:function(){var e=this.state.password;e.length<1?(U(this.inPassword.current,null,this.inPasswordError.current,null,!1),this.setState({validPassword:!1})):e.length<6?(U(this.inPassword.current,"not-valid",this.inPasswordError.current,"Minumum 6 character long",!1),this.setState({validPassword:!1})):(U(this.inPassword.current,"valid",this.inPasswordError.current,null,!0),this.setState({validPassword:!0}))}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"signin container",children:[Object(S.jsxs)("form",{className:"option form",children:[Object(S.jsx)("span",{className:"welcome",children:"Welcome Back."}),Object(S.jsx)("input",{type:"text",className:"pad",value:this.state.username,placeholder:"Username",spellCheck:"false",autoComplete:"on",ref:this.inUsername,onChange:this.validateUsername,required:!0}),Object(S.jsx)("span",{className:"Error inUsernameError",ref:this.inUsernameError}),Object(S.jsx)("input",{type:"password",className:"pad",value:this.state.password,autoComplete:"off",placeholder:"Password",ref:this.inPassword,onChange:this.validatePassword}),Object(S.jsx)("span",{className:"Error inPasswordError",ref:this.inPasswordError}),Object(S.jsxs)("button",{type:"submit",onClick:this.onSignin,children:[Object(S.jsx)("span",{children:"Log in"}),Object(S.jsx)("div",{className:"arrow arrow-right",children:Object(S.jsx)("img",{src:v,alt:"arrow"})})]})]}),Object(S.jsxs)("div",{className:"controls justify-signin",children:[Object(S.jsxs)("div",{className:"ctl-signup",children:["Not a user?",Object(S.jsx)("button",{type:"button",onClick:function(r){r.preventDefault(),e.props.registered(!1)},children:"Sign up"})]}),Object(S.jsx)("button",{type:"button",className:"ctl-forgot",children:"Forgot password?"})]})]})}}]),a}(s.a.Component),R=function(e){Object(c.a)(a,e);var r=Object(u.a)(a);function a(e){var t;return Object(o.a)(this,a),(t=r.call(this,e)).state={next:!1,email:"",validEmail:!1,password:"",validPassword:!1,rePassword:"",validRePassword:!1,username:"",validUsername:!1,name:"",validName:!1},t.renderValidUsername=Object(p.a)(m.a.mark((function e(){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.state.username)<1)){e.next=6;break}U(t.upUsername.current,null,t.upUsernameError.current,null,!1),t.setState({validUsername:!1,username:""}),e.next=23;break;case 6:if(O(t.state.username)){e.next=11;break}U(t.upUsername.current,"not-valid",t.upUsernameError.current,"Not a valid username!",!1),t.setState({validUsername:!1}),e.next=23;break;case 11:return e.prev=11,e.next=14,b(r).then((function(e){return e.data}));case 14:e.sent.available?(U(t.upUsername.current,"valid",t.upUsernameError.current,null,!0),t.setState({validUsername:!0})):(U(t.upUsername.current,"not-valid",t.upUsernameError.current,"Username name is not available!",!1),t.setState({validUsername:!1})),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(11),console.log(e.t0),U(t.upUsername.current,"not-valid",t.upUsernameError.current,"Please try again later!",!1),t.setState({validUsername:!1});case 23:case"end":return e.stop()}}),e,null,[[11,18]])}))),t.renderValidName=function(){var e=t.state.name;e.length<1?(U(t.upName.current,null,t.upNameError.current,null,!1),t.setState({validName:!1,name:""})):e.length>20?(U(t.upName.current,"not-valid",t.upNameError.current,"Maximum 20 character long.",!1),t.setState({validName:!1})):(U(t.upName.current,"valid",t.upNameError.current,null,!0),t.setState({validName:!0}))},t.validateEmail=function(e){e.preventDefault(),t.setState({email:e.target.value.trim()}),clearTimeout(t.emailTimeOut),t.emailTimeOut=setTimeout((function(){t.renderValidEmail()}),700)},t.validatePassword=function(e){e.preventDefault(),t.setState({password:e.target.value.trim(),rePassword:""}),t.renderValidRePassword(),clearTimeout(t.passwordTimeOut),t.passwordTimeOut=setTimeout((function(){t.renderValidPassword()}),700)},t.validateRePassword=function(e){e.preventDefault(),t.setState({rePassword:e.target.value.trim()}),clearTimeout(t.rePasswordTimeOut),t.rePasswordTimeOut=setTimeout((function(){t.renderValidRePassword()}),700)},t.validateUsername=function(e){e.preventDefault(),t.setState({username:e.target.value.trim()}),clearTimeout(t.usernameTimeOut),t.usernameTimeOut=setTimeout((function(){t.renderValidUsername()}),500)},t.validateName=function(e){e.preventDefault();var r=e.target.value;t.setState({name:r}),clearTimeout(t.nameTimeOut),t.nameTimeOut=setTimeout((function(){t.renderValidName()}),500)},t.onNext=function(e){e.preventDefault(),t.state.validEmail?t.state.validPassword?t.state.rePassword?t.setState({next:!0}):U(t.upRePassword.current,"not-valid",t.upRePasswordError.current,"Password did not match!",!1):U(t.upPassword.current,"not-valid",t.upPasswordError.current,"Not a valid password!",!1):U(t.upEmail.current,"not-valid",t.upEmailError.current,"Not a valid email!",!1)},t.onBack=function(e){e.preventDefault(),U(t.upUsername.current,null,t.upUsernameError.current,null,!1),t.setState({username:"",validUsername:!1,next:!1})},t.onSignup=function(){var e=Object(p.a)(m.a.mark((function e(r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),t.state.validEmail&&t.state.validPassword&&t.state.validRePassword&&t.state.validUsername&&t.state.validName){e.next=6;break}return e.next=4,alert("Please enter valid details!");case 4:e.next=10;break;case 6:return e.next=8,a=t.state.email,s=t.state.password,n=t.state.username,i=t.state.name,f.post("/api/v1/signup",{data:{email:a,password:s,username:n,name:i}}).then((function(e){return e}));case 8:200===e.sent.data.code?(t.setState({next:!1}),t.props.registered(!0)):t.setState({next:!1});case 10:case"end":return e.stop()}var a,s,n,i}),e)})));return function(r){return e.apply(this,arguments)}}(),t.renderCredential=function(){return Object(S.jsxs)("div",{className:"option",children:[Object(S.jsx)("span",{className:"create",children:"Create account."}),Object(S.jsx)("input",{type:"email",className:"pad",value:t.state.email,placeholder:"Email",autoComplete:"off",spellCheck:"false",ref:t.upEmail,onChange:t.validateEmail}),Object(S.jsx)("span",{className:"Error upEmailError",ref:t.upEmailError}),Object(S.jsx)("input",{type:"password",className:"pad",value:t.state.password,autoComplete:"off",placeholder:"Password",ref:t.upPassword,onChange:t.validatePassword}),Object(S.jsx)("span",{className:"Error upPasswordError",ref:t.upPasswordError}),Object(S.jsx)("input",{type:"password",className:"pad",value:t.state.rePassword,autoComplete:"off",placeholder:"Confirm Password",ref:t.upRePassword,onChange:t.validateRePassword}),Object(S.jsx)("span",{className:"Error upRePasswordError",ref:t.upRePasswordError}),Object(S.jsxs)("button",{type:"button",onClick:t.onNext,children:[Object(S.jsx)("span",{children:"Next"}),Object(S.jsx)("div",{className:"arrow arrow-right",children:Object(S.jsx)("img",{src:v,alt:"arrow"})})]})]})},t.renderUserDetail=function(){return Object(S.jsxs)("div",{className:"option",children:[Object(S.jsx)("span",{className:"select",children:"Select username."}),Object(S.jsx)("input",{type:"text",className:"pad",value:t.state.username,placeholder:"Username",autoComplete:"off",spellCheck:"false",ref:t.upUsername,onChange:t.validateUsername,required:!0}),Object(S.jsx)("span",{className:"Error upUsernameError",ref:t.upUsernameError}),Object(S.jsx)("input",{type:"text",value:t.state.name,className:"pad",placeholder:"Name",autoComplete:"off",spellCheck:"false",ref:t.upName,onChange:t.validateName,required:!0}),Object(S.jsx)("span",{className:"Error upNameError",ref:t.upNameError}),Object(S.jsxs)("button",{type:"button",onClick:t.onBack,children:[Object(S.jsx)("span",{children:"Back"}),Object(S.jsx)("div",{className:"arrow arrow-left",children:Object(S.jsx)("img",{src:v,alt:"arrow",style:{transform:"rotate(180deg)"}})})]}),Object(S.jsxs)("button",{type:"submit",onClick:t.onSignup,children:[Object(S.jsx)("span",{children:"Sign up"}),Object(S.jsx)("div",{className:"arrow arrow-right",children:Object(S.jsx)("img",{src:v,alt:"arrow"})})]})]})},t.upEmail=s.a.createRef(),t.upEmailError=s.a.createRef(),t.upPassword=s.a.createRef(),t.upPasswordError=s.a.createRef(),t.upRePassword=s.a.createRef(),t.upRePasswordError=s.a.createRef(),t.upUsername=s.a.createRef(),t.upUsernameError=s.a.createRef(),t.upName=s.a.createRef(),t.upNameError=s.a.createRef(),t}return Object(l.a)(a,[{key:"renderValidEmail",value:function(){var e=this.state.email;e.length<1?(U(this.upEmail.current,null,this.upEmailError.current,null,!1),this.setState({validEmail:!1})):!function(e){return w.test(e)}(e)?(U(this.upEmail.current,"not-valid",this.upEmailError.current,"Not a valid Email",!1),this.setState({validEmail:!1})):(U(this.upEmail.current,"valid",this.upEmailError.current,null,!0),this.setState({validEmail:!0}))}},{key:"renderValidPassword",value:function(){var e=this.state.password;e.length<1?(U(this.upPassword.current,null,this.upPasswordError.current,null,!1),this.setState({validPassword:!1})):e.length<6?(U(this.upPassword.current,"not-valid",this.upPasswordError.current,"Minumum 6 character long",!1),this.setState({validPassword:!1})):(U(this.upPassword.current,"valid",this.upPasswordError.current,null,!0),this.setState({validPassword:!0}))}},{key:"renderValidRePassword",value:function(){var e=this.state.password,r=this.state.rePassword;r.length<1?(U(this.upRePassword.current,null,this.upRePasswordError.current,null,!1),this.setState({validRePassword:!1})):e!==r?(U(this.upRePassword.current,"not-valid",this.upRePasswordError.current,"Password did not match!",!1),this.setState({validRePassword:!1})):(U(this.upRePassword.current,"valid",this.upRePasswordError.current,null,!0),this.setState({validRePassword:!0}))}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"signup container",children:[Object(S.jsx)("form",{className:"form",children:this.state.next?this.renderUserDetail():this.renderCredential()}),Object(S.jsx)("div",{className:"controls justify-signup",children:Object(S.jsxs)("div",{className:"ctl-signup",children:["Already have an account?",Object(S.jsx)("button",{type:"button",onClick:function(r){r.preventDefault(),e.props.registered(!0)},children:"Sign In"})]})})]})}}]),a}(s.a.Component),y=a.p+"static/media/logo.a2c8003d.svg",T=function(e){Object(c.a)(a,e);var r=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return(e=r.call.apply(r,[this].concat(s))).state={registered:!0},e.setRegister=function(r){e.setState({registered:r})},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)("div",{className:"template outer-template",children:Object(S.jsx)("div",{className:"template inner-template"})}),Object(S.jsxs)("div",{className:"logo",children:[Object(S.jsxs)("span",{className:"logo-text",children:["K",Object(S.jsx)("img",{className:"logo-svg",src:y,alt:"O"}),"NNECT"]}),Object(S.jsx)("span",{className:"logo-description",children:"chat anonymously and securely."})]}),this.state.registered?Object(S.jsx)(k,{registered:this.setRegister}):Object(S.jsx)(R,{registered:this.setRegister})]})}}]),a}(s.a.Component),C=function(e){Object(c.a)(a,e);var r=Object(u.a)(a);function a(){return Object(o.a)(this,a),r.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(S.jsx)("div",{className:"base",children:Object(S.jsx)(T,{})})}}]),a}(s.a.Component);i.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(C,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.207edffe.chunk.js.map